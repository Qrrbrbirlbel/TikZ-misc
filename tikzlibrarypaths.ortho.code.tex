\RequirePackage{etoolbox}
\patchcmd{\tikz@handle}{\tikz@rect}{\tikz@r@char}{}{%                                               for rl
	\PackageError{qrr-tikz-hvvh}{Patching of \string\tikz@handle\space failed}{}\endinput}
\patchcmd{\tikz@l@char}{\tikz@expand}{\pgfutil@ifnextchar r{\qrr@tikz@lr@lineto}{\tikz@expand}}{}{% for lr
	\PackageError{qrr-tikz-hvvh}{Patching of \string\tikz@l@char\space failed}{}\endinput}
\patchcmd{\tikz@handle@more}{\tikz@expand}{\qrr@tikz@handle@more}{}{%                               for ud
	\PackageError{qrr-tikz-hvvh}{Patching of \string\tikz@handle@more\space failed (I)}{}\endinput}
\patchcmd{\tikz@handle@more}{\tikz@decoration}{\tikz@d@char}{}{%                                    for du
	\PackageError{qrr-tikz-hvvh}{Patching of \string\tikz@handle@more\space failed (II)}{}\endinput}

\tikzset{%
  |-|/.style={%
   /utils/exec=\pgfmathsetmacro\qrr@tikz@hvvh@ratio{#1},%
   to path={|-| (\tikztotarget) \tikztonodes}},%
  -|-/.style={%
   /utils/exec=\pgfmathsetmacro\qrr@tikz@hvvh@ratio{#1},%
   to path={-|- (\tikztotarget) \tikztonodes}},%
  ud/.style={%
    /utils/exec=\pgfmathsetlength\qrr@tikz@udlr@distance{#1},%
    to path={ud (\tikztotarget) \tikztonodes}},%
  du/.style={%
    /utils/exec=\pgfmathsetlength\qrr@tikz@udlr@distance{#1},%
    to path={du (\tikztotarget) \tikztonodes}},%
  lr/.style={%
    /utils/exec=\pgfmathsetlength\qrr@tikz@udlr@distance{#1},%
    to path={lr (\tikztotarget) \tikztonodes}},%
  rl/.style={%
    /utils/exec=\pgfmathsetlength\qrr@tikz@udlr@distance{#1},%
    to path={rl (\tikztotarget) \tikztonodes}}%
}

%BEGIN_FOLD Handler
\def\tikz@d@char{\pgfutil@ifnextchar e\tikz@decoration\qrr@tikz@du@lineto}
\def\tikz@r@char{\pgfutil@ifnextchar e\tikz@rect\qrr@tikz@rl@lineto}
\def\qrr@tikz@handle@more{%
	\ifx\@let@token u%
	\let\@next\qrr@tikz@ud@lineto
	\else
	\let\@next\tikz@expand
	\fi\@next}

\def\tikz@vh@lineto-{%
	\pgfutil@ifnextchar |{\expandafter\qrr@tikz@vhv@lineto\pgfutil@gobble}\tikz@vh@lineto@next}

\def\tikz@hv@lineto{%
	\pgfutil@ifnextchar -{\expandafter\qrr@tikz@hvh@lineto\pgfutil@gobble}{%
		\pgfutil@ifnextchar n
		{\tikz@collect@label@onpath\tikz@hv@lineto}
		{\pgfutil@ifnextchar c{\tikz@collect@coordinate@onpath\tikz@hv@lineto}%
			{\tikz@scan@one@point{\tikz@@hv@lineto}}}}}
%END_FOLD

%BEGIN_FOLD Timer
%END_FOLD

%BEGIN_FOLD hvvh operator
%END_FOLD

%BEGIN_FOLD udlr operators
%% ud style
\def\qrr@tikz@rl@lineto l{\qrr@tikz@rl@lineto@next}
\def\qrr@tikz@lr@lineto r{\qrr@tikz@lr@lineto@next}
\def\qrr@tikz@du@lineto u{\qrr@tikz@du@lineto@next}
\def\qrr@tikz@ud@lineto d{\qrr@tikz@ud@lineto@next}
%END_FOLD

\input tikzlibrarypaths.ortho.tex
\endinput
